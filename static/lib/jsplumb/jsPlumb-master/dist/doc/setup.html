<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
        <link rel="shortcut icon" type="image/png" href="../img/favicon.png">
        <title></title>

        

<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" href="../css/jsplumb.css">
        <link rel="stylesheet" href="../css/jsplumb-doc.css">
    </head>
    <body>
        <div id="headerWrapper">
    <div id="header">
        <div class="logo"><img src="http://jsplumbtoolkit.com/logo-bw.png"></div>
        <div class="menu">   
            <a href="../demo">DEMOS</a>
            <a href="../doc/home.html">DOCS</a>                    
            <a href="../apidocs">API</a>
            <a href="../tests/index.html">TESTS</a>
            <a href="mailto:hello@jsplumbtoolkit.com">CONTACT</a>
            <a href="http://blog.jsplumbtoolkit.com">BLOG</a>
            <a href="http://github.com/sporritt/jsplumb/">GITHUB</a>
            <a href="https://groups.google.com/forum/?fromgroups#!forum/jsplumb">DISCUSS</a>
            <a href="https://github.com/sporritt/jsPlumb/issues">ISSUES</a>
        </div>
    </div>
</div> 

        <div class="main">
            <div class="nav">
                <h3>Contents</h3>
                <ul>
                    <li><a href="changelog">Changelog</a></li>
                    <li>Imports and Setup

                        <ul>
                            <li><a href="home#browser">Browser Compatibility</a></li>
                            <li><a href="home#setup">Setup</a></li>
                            <li><a href="home#doctype">Doctype</a></li>
                            <li><a href="home#imports">Required Imports</a></li>
                            <li><a href="home#initializing">Initializing jsPlumb</a></li>
                            <li><a href="home#multiple">Multiple jsPlumb Instances</a></li>
                            <li><a href="home#zindex">Z-Index Considerations</a></li>
                            <li><a href="home#container">Where does jsPlumb add elements?</a></li>
                            <li><a href="home#performance">Performance</a></li>
                            <li><a href="zooming">Zooming</a></li>
                        </ul></li>
                    <li><a href="defaults">Configuring Defaults</a></li>
                    <li><a href="basic-concepts">Basic Concepts</a>

                        <ul>
                            <li><a href="anchors">Anchors</a></li>
                            <li><a href="connectors">Connectors</a></li>
                            <li><a href="endpoints">Endpoints</a></li>
                            <li><a href="overlays">Overlays</a></li>
                        </ul></li>
                    <li><a href="dragging">Element Dragging</a></li>
                    <li><a href="connections">Establishing Connections</a>

                        <ul>
                            <li><a href="connections#programmatic">Programmatic Connections</a></li>
                            <li><a href="connections#common">Reusing Common Settings</a></li>
                            <li><a href="connections#detaching">Detaching Programmatic Connections</a></li>
                            <li><a href="connections#draganddrop">Drag and Drop Connections</a></li>
                            <li><a href="connections#sourcesandtargets">Elements as sources &amp; targets</a></li>
                            <li><a href="connections#maketarget">Element Targets</a></li>
                            <li><a href="connections#makesource">Element Sources</a></li>
                            <li><a href="connections#sourcefilter">Specifying drag source area</a></li>
                        </ul></li>
                    <li><a href="removing">Removing Connections/Endpoints</a></li>
                    <li><a href="parameters">Connection &amp; Endpoint Parameters</a></li>
                    <li><a href="types">Connection &amp; Endpoint Types</a></li>
                    <li><a href="events">Events</a>

                        <ul>
                            <li><a href="interceptors">Interceptors</a></li>
                        </ul></li>
                    <li>Appearance

                        <ul>
                            <li><a href="paint-styles">Styling via Paint Styles</a></li>
                            <li><a href="styling-via-css">Styling via CSS</a></li>
                        </ul></li>
                    <li><a href="querying">Querying jsPlumb</a></li>
                    <li><a href="animation">Animation</a></li>
                    <li><a href="utilities">Utility Functions</a></li>
                    <li>Examples

                        <ul>
                            <li><a href="connect-examples">jsPlumb.connect</a></li>
                            <li><a href="draggable-connections-examples">Draggable Connections</a></li>
                            <li><a href="miscellaneous-examples">Miscellaneous</a></li>
                        </ul></li>
                    <li>Development

                        <ul>
                            <li><a href="development">Which files are which?</a></li>
                            <li><a href="Build">Building jsPlumb</a></li>
                            <li><a href="development-documentation">Documentation while developing</a></li>
                        </ul></li>
                </ul>

            </div>
            <div class="markdown-body">
                <h2>Required Imports and Basic Setup</h2>

<p>I strongly encourage you to read this entire page. There are a few things you need to know about integrating jsPlumb with your UI.</p>

<ol>
<li><a href="#browser">Browser Compatibility</a></li>
<li><a href="#setup">Setup</a></li>
<li><a href="#imports">Required Imports</a></li>
<li><a href="#initializing">Initializing jsPlumb</a></li>
<li><a href="#multiple">Multiple jsPlumb Instances</a></li>
<li><a href="#zindex">Z-Index Considerations</a></li>
<li><a href="#container">Where does jsPlumb add elements?</a></li>
<li><a href="#dragging">Element Dragging</a></li>
<li><a href="#performance">Performance</a></li>
</ol>

<p><a name="browser"></a></p>

<h3>Browser Compatibility</h3>

<p>jsPlumb runs on everything from IE6 up.  There are some caveats, though, because of various browser/library bugs:</p>

<ul>
<li>jQuery 1.6.x and 1.7.x have a bug in their SVG implementation for IE9 that causes hover events to not get fired.</li>
<li>jQuery 2.0 does not support 6,7 or 8.</li>
<li>Safari 5.1 has an SVG bug that prevents mouse events from being passed through the transparent area of an SVG element (Safari 6.x does not seem to have the same problem)<br></li>
</ul>

<p><a name="setup"></a></p>

<h3>Setup</h3>

<p><a name="imports"></a></p>

<h4>Required Imports</h4>

<h5>jQuery</h5>

<ul>
<li>jQuery 1.3.x or higher. jsPlumb has been tested with everything up to 2.x.</li>
<li>jQuery UI 1.7.x or higher (if you wish to support drag and drop). Always remember to check that the versions of jQuery and jQuery UI you are using are compatible.</li>
</ul>

<pre>&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="PATH_TO/jquery.jsPlumb-1.5.0-all-min.js "&gt;&lt;/script&gt;
</pre>          

<h6>Touch Events</h6>

<p>jQuery &lt;= 1.9.x does not support touch events, but there is a neat plugin you can use for this - <a href="http://touchpunch.furf.com/">jQuery UI Touch Punch</a>.  You need to include it in your page after both jQuery and jQueryUI. But note that it doesn&#39;t work properly with the <code>makeSource</code> method...better to use vanilla jsPlumb!</p>

<p><a name="initializing"></a></p>

<h4>Initializing jsPlumb</h4>

<p>You should not start making calls to jsPlumb until the DOM has been initialized - perhaps no surprises there.  To handle this, you should bind to the <code>ready</code> event on jsPlumb (or the instance of jsPlumb you are working with):           </p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;ready&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="p">...</span>         
<span class="c1">// your jsPlumb related init code goes here</span>
<span class="p">...</span>
<span class="p">});</span>
</code></pre></div>
<p>There&#39;s a helper method that can save you a few precious characters:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">jsPlumb.ready(function() {
...
// your jsPlumb related init code goes here
...
});
</code></pre></div>
<p>If you bind to the <code>ready</code> event after jsPlumb has already been initialized, your callback will be executed immediately.</p>

<p><a name="multiple"></a></p>

<h4>Multiple jsPlumb instances</h4>

<p>jsPlumb is registered on the browser&#39;s Window by default, providing one static instance for the whole page to use.  Should you need to, though, you can instantiate independent instances of jsPlumb, using the <code>getInstance</code> method, for example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">firstInstance</span> <span class="o">=</span> <span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">();</span>
</code></pre></div>
<p>The variable <code>firstInstance</code> can now be treated exactly as you would treat the <code>jsPlumb</code> variable - you can set defaults, call the <code>connect</code> method, whatever:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">firstInstance</span><span class="p">.</span><span class="nx">importDefaults</span><span class="p">({</span>
  <span class="nx">Connector</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Bezier&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">curviness</span><span class="o">:</span> <span class="mi">150</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">Anchors</span> <span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;TopCenter&quot;</span><span class="p">,</span> <span class="s2">&quot;BottomCenter&quot;</span> <span class="p">]</span>
<span class="p">});</span>

<span class="nx">firstInstance</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span><span class="s2">&quot;element1&quot;</span><span class="p">,</span> 
  <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;element2&quot;</span><span class="p">,</span> 
  <span class="nx">scope</span><span class="o">:</span><span class="s2">&quot;someScope&quot;</span> 
<span class="p">});</span>
</code></pre></div>
<p><code>getInstance</code> optionally takes an object that provides the defaults:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">secondInstance</span> <span class="o">=</span> <span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">getInstance</span><span class="p">({</span>
  <span class="nx">PaintStyle</span><span class="o">:</span><span class="p">{</span> 
    <span class="nx">lineWidth</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span> 
    <span class="nx">strokeStyle</span><span class="o">:</span><span class="s2">&quot;#567567&quot;</span><span class="p">,</span> 
    <span class="nx">outlineColor</span><span class="o">:</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> 
    <span class="nx">outlineWidth</span><span class="o">:</span><span class="mi">1</span> 
  <span class="p">},</span>
  <span class="nx">Connector</span><span class="o">:</span><span class="p">[</span> <span class="s2">&quot;Bezier&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">curviness</span><span class="o">:</span> <span class="mi">30</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">Endpoint</span><span class="o">:</span><span class="p">[</span> <span class="s2">&quot;Dot&quot;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">radius</span><span class="o">:</span><span class="mi">5</span> <span class="p">}</span> <span class="p">],</span>
  <span class="nx">EndpointStyle</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">fillStyle</span><span class="o">:</span> <span class="s2">&quot;#567567&quot;</span>  <span class="p">},</span>
  <span class="nx">Anchor</span> <span class="o">:</span> <span class="p">[</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]</span>
<span class="p">});</span>

<span class="nx">secondInstance</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span> <span class="nx">source</span><span class="o">:</span><span class="s2">&quot;element4&quot;</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;element3&quot;</span><span class="p">,</span> <span class="nx">scope</span><span class="o">:</span><span class="s2">&quot;someScope&quot;</span> <span class="p">});</span>
</code></pre></div>
<p><a name="zindex"></a></p>

<h4>Z-index Considerations</h4>

<p>You need to pay attention to the z-indices of the various parts of your UI when using jsPlumb, in particular to ensure that the elements that jsPlumb adds to the DOM do not overlay other parts of the interface. </p>

<p>jsPlumb adds an element to the DOM for each Endpoint, Connector and Overlay. So for a connection having visible Endpoints at each end and a label in the middle, jsPlumb adds four elements to the DOM.  The actual elements it adds depend on the renderer in use (Canvas/SVG/VML).            </p>

<p>To help you organise z-indices correctly, jsPlumb adds a CSS class to each type of element it adds. They are as follows:        </p>

<table style="color:black;font-size:90%;">
  <tr><td><strong>Component</strong></td><td><strong>Class</strong></td></tr>
  <tr><td>Endpoint</td><td>_jsPlumb_endpoint</td></tr>
  <tr><td>Connector</td><td>_jsPlumb_connector</td></tr>
  <tr><td>Overlay</td><td>_jsPlumb_overlay</td></tr>
</table>            
                            

<p>In addition, whenever the mouse is hovering over an Endpoint or Connection, that component is assigned the class <code>_jsPlumb_hover</code>. For more information about styling jsPlumb with CSS, see <a href="styling-via-css">this page</a>.</p>

<p><a name="container"></a></p>

<h4>Where does jsPlumb add elements?</h4>

<p>It&#39;s important to understand where in the DOM jsPlumb will add any elements it creates, as it has a bearing on the markup you can use with jsPlumb.</p>

<p>Early versions of jsPlumb added everything to the end of the <strong>body</strong> element. This has the advantage of being the most flexible arrangement in terms of supporting which elements can be connected, but in certain use cases produced unexpected results. Consider the arrangement where you have some connected elements in a tab: you would expect jsPlumb to add elements inside the tab, so that when the user switches tabs and the current one is hidden, all the jsPlumb stuff is hidden too.  But when the elements are  on the body, this does not happen!   </p>

<p>For this reason, from 1.3.0 onwards, jsPlumb&#39;s default behaviour is to attach Endpoint elements to the parent of the element the Endpoint is attached to (<strong>not</strong> the actual element the Endpoint is attached to), and to attach Connector elements to the parent of the source Endpoint in the Connection. This results in all the elements of the Connection being siblings inside the same parent node, which jsPlumb requires, for various reasons arising from the trade off between doing lots of maths and the performance of the whole thing.</p>

<p>In general, the default behaviour means that you cannot do things like this:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container0&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;node0&gt;&lt;/div&gt;</span>
<span class="s">    &lt;/div&gt;</span>
<span class="s">    &lt;div id=&quot;</span><span class="err">container1&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;node1&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>    
    var e0 = jsPlumb.addEndpoint(&quot;node0&quot;),
    e1 = jsPlumb.addEndpoint(&quot;node1&quot;);

    jsPlumb.connect({ source:e0, target:e1 });
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>...because the elements created for <code>e0</code> and <code>e1</code> would have different parent nodes, and an attempt to make a Connection between them would not work.  For the example just given, you would need to register the Endpoints on the <code>container</code> divs (and then quite possibly throw away the <code>node</code> divs):       </p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;body&gt;</span>

<span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
  var e0 = jsPlumb.addEndpoint(&quot;container0&quot;),
      e1 = jsPlumb.addEndpoint(&quot;container1&quot;);
    jsPlumb.connect({ source:e0, target:e1 });
<span class="nt">&lt;/script&gt;</span>
</code></pre></div>
<p>now &#39;e0&#39; and &#39;e1&#39; have the same parent - the <strong>body</strong> element. </p>

<p>Remember that you can use the <code>anchor</code> parameter to an <code>addEndpoint</code> call to specify where on an element you want an Endpoint to appear.  Used in conjunction with CSS classes (discussed below), you can have an Endpoint on top of some element wherever you like.                </p>

<p><strong>Note regarding the drawEndpoints option on jsPlumb.connect</strong>: with the default behaviour, jsPlumb uses the offsetParent of the source endpoint in a connection to make final adjustments to the position of a connector. When drawEndpoints is set to false, there is no offsetParent of the source endpoint because it is not visible.  If your connection lies inside some container other than the document body, the connector will not be able to take that container&#39;s offset into account, and will most likely not be in the right place.  You should either use the <code>Blank</code> endpoint when you don&#39;t want to see one, or instruct jsPlumb to attach everything to the document body (see below). </p>

<h4>Overriding the default behaviour</h4>

<p>From version 1.3.3, the <code>Container</code> concept was reintroduced into jsPlumb, because there are use cases in which the default behaviour makes it difficult or impossible to build the UI you want. You can instruct jsPlumb to use some element as the parent of everything jsPlumb adds to the UI through usage of the <code>jsPlumb.Defaults.Container</code> property, or you can set a <code>container</code> parameter on calls to <code>addEndpoint</code> or <code>connect</code> (if this is set and a default is also set, this default value is actually used.  This may seem counter-intuitive, and could of course be changed if there is feedback from the community that this would be a good idea). </p>

<p>Some examples:</p>

<ul>
<li>Set a container to use as the default container, using a jQuery selector (you can supply a selector, element id, or Element here), and then add an Endpoint.  The canvas (or SVG/VML element) created will be a child of the document body:</li>
</ul>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">setContainer</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">));</span>
<span class="p">...</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">addEndpoint</span><span class="p">(</span><span class="nx">someDiv</span><span class="p">,</span> <span class="p">{</span> <span class="nx">endpoint</span> <span class="nx">options</span> <span class="p">});</span>
</code></pre></div>
<ul>
<li>Set a container to use as the default container, using an element id, and then connect two elements.  The elements created in this example will be children of the element with id &quot;containerId&quot;:</li>
</ul>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">Defaults</span><span class="p">.</span><span class="nx">Container</span> <span class="o">=</span> <span class="s2">&quot;containerId&quot;</span><span class="p">;</span>
<span class="p">...</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span> <span class="nx">source</span><span class="o">:</span><span class="nx">someDiv</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="nx">someOtherDiv</span> <span class="p">});</span>
</code></pre></div>
<ul>
<li>Pass a container to use into a <code>jsPlumb.connect</code> call, using a selector.  The elements created in this example will be children of the element with id &quot;containerId&quot;:</li>
</ul>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span> <span class="nx">source</span><span class="o">:</span><span class="nx">someDiv</span><span class="p">,</span> <span class="nx">target</span><span class="o">:</span><span class="nx">someOtherDiv</span><span class="p">,</span> <span class="nx">container</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#containerId&quot;</span><span class="p">)</span> <span class="p">});</span>
</code></pre></div>
<ul>
<li>Pass a container to use into a <code>jsPlumb.addEndpoint</code> call, using an element id. The element created in this example will be a child of the element with id &quot;containerId&quot;:<br></li>
</ul>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">addEndpoint</span><span class="p">(</span><span class="nx">someDiv</span><span class="p">,</span> <span class="p">{</span> <span class="p">...,</span> <span class="nx">container</span><span class="o">:</span><span class="s2">&quot;containerId&quot;</span> <span class="p">});</span>
</code></pre></div>
<p><a name="dragging"></a></p>

<h4>Element Dragging</h4>

<p>A common feature of interfaces using jsPlumb is that the elements are draggable.  Unless you absolutely need to configure this behaviour using your library&#39;s underlying method, you should use <code>jsPlumb.draggable</code>:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="s2">&quot;elementId&quot;</span><span class="p">);</span>
</code></pre></div>
<p>You can also pass a selector from your library in to this method:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.someClass&quot;</span><span class="p">));</span>
</code></pre></div>
<p>This method is just a wrapper for the underlying library&#39;s draggable functionality, and there is a two-argument version in which the second argument is passed down to the underlying library (example below).  </p>

<h5>Drag Containment</h5>

<p>A common request is for the ability to contain the area within which an element may be dragged.  Remember that jsPlumb&#39;s <code>draggable</code> method is just a pass-through to the underlying library&#39;s drag functionality, so for jQuery this is as simple as providing a <code>containment</code> parameter:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;someSelector&quot;</span><span class="p">),</span> <span class="p">{</span>
  <span class="nx">containment</span><span class="o">:</span><span class="s2">&quot;parent&quot;</span>
<span class="p">});</span>
</code></pre></div>
<p>Right now in vanilla jsPlumb you can use this syntax to constrain dragging to a parent element:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="s2">&quot;.someSelector&quot;</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">constrain</span><span class="o">:</span><span class="kc">true</span>
<span class="p">});</span>
</code></pre></div>
<h5>Dragging nested elements</h5>

<p>jsPlumb takes nesting into account when handling draggable elements. For example, say you have this markup:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;childType1&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;childType2&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>...and then you connect one of those child divs to something, and make &quot;container&quot; draggable:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span>
    <span class="nx">source</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#container .childType1&quot;</span><span class="p">),</span>
    <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;somewhere else&quot;</span>
<span class="p">});</span>

<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="s2">&quot;container&quot;</span><span class="p">);</span>
</code></pre></div>
<p>Now when you drag <code>container</code>, jsPlumb will have noticed that there are nested elements that have Connections, and they will be updated.  Note that the order of operations is not important here: if <code>container</code> was already draggable when you connected one of its children to something, you would get the same result.</p>

<h6>Nested Element offsets</h6>

<p>For performance reasons, jsPlumb caches the offset of each nested element relative to its draggable ancestor. If you make changes to the draggable ancestor that will have resulted in the offset of one or more nested elements changing, you need to tell jsPlumb about it, using the <code>recalculateOffsets</code> function.       </p>

<p>This does not apply, though, if you are dragging nested children.  In that case, jsPlumb automatically updates the child offsets after draggings ends - if you used <code>jsPlumb.draggable</code> to configure the child elements as draggable.</p>

<p>Consider the example from before, but with a change to the markup after initializing everything:            </p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;header&quot;</span> <span class="na">style=</span><span class="s">&quot;height:20px;background-color:blue;&quot;</span><span class="nt">&gt;</span>header<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;childType1&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;childType2&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div&gt;</span>
</code></pre></div>
<p>...and then you connect one of those child divs to something, and make &quot;container&quot; draggable:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">connect</span><span class="p">({</span>
  <span class="nx">source</span><span class="o">:</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#container .childType1&quot;</span><span class="p">),</span>
  <span class="nx">target</span><span class="o">:</span><span class="s2">&quot;somewhere else&quot;</span>
<span class="p">});</span>

<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="s2">&quot;container&quot;</span><span class="p">);</span>

<span class="p">...</span>

<span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#container .header).hide();    // hide the header bar. this will alter the offset of the other child elements...</span>
<span class="s2">jsPlumb.recalculateOffsets(&quot;</span><span class="nx">container</span><span class="s2">&quot;);   // tell jsPlumb that the internal dimensions have changed.</span>
<span class="s2">// you can also use a selector, eg $(&quot;</span><span class="err">#</span><span class="nx">container</span><span class="err">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Another setup we have seen in which you will need to call <code>recalculateOffsets</code> is when you have some draggable parent that itself contains draggable child nodes:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;parent&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;child&quot;</span><span class="nt">&gt;</span>child 1<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;child&quot;</span><span class="nt">&gt;</span>child 2<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div>
<p>If you make both <code>.parent</code> and <code>.child</code> draggable, you need to make a call to <code>recalculateOffsets</code> whenever a <code>.child</code> node stops dragging:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.parent&quot;</span><span class="p">));</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">draggable</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.child&quot;</span><span class="p">),</span> <span class="p">{</span>
    <span class="nx">containment</span><span class="o">:</span><span class="s2">&quot;parent&quot;</span><span class="p">,</span>
    <span class="nx">stop</span><span class="o">:</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">recalculateOffsets</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">());</span>
    <span class="p">}</span>
<span class="p">});</span>
<span class="err">```</span><span class="nx">javascript</span>


<span class="o">&lt;</span><span class="nx">a</span> <span class="nx">name</span><span class="o">=</span><span class="s2">&quot;performance&quot;</span><span class="o">&gt;&lt;</span><span class="err">/a&gt;</span>
<span class="err">###</span> <span class="nx">Performance</span>
<span class="nx">The</span> <span class="nx">speed</span> <span class="nx">at</span> <span class="nx">which</span> <span class="nx">jsPlumb</span> <span class="nx">executes</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">the</span> <span class="nx">practical</span> <span class="nx">limit</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">number</span> <span class="nx">of</span> <span class="nx">manageable</span> <span class="nx">connections</span><span class="p">,</span> <span class="nx">is</span> <span class="nx">greatly</span> <span class="nx">affected</span> <span class="nx">by</span> <span class="nx">the</span> <span class="nx">browser</span> <span class="nx">upon</span> <span class="nx">which</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">being</span> <span class="nx">run</span><span class="p">.</span>  <span class="nx">At</span> <span class="nx">the</span> <span class="nx">time</span> <span class="nx">of</span> <span class="nx">writing</span><span class="p">,</span> <span class="nx">it</span> <span class="nx">will</span> <span class="nx">probably</span> <span class="nx">not</span> <span class="nx">surprise</span> <span class="nx">you</span> <span class="nx">to</span> <span class="nx">learn</span> <span class="nx">that</span> <span class="nx">jsPlumb</span> <span class="nx">runs</span> <span class="nx">fastest</span> <span class="k">in</span> <span class="nx">Chrome</span><span class="p">,</span> <span class="nx">followed</span> <span class="nx">by</span> <span class="nx">Safari</span><span class="o">/</span><span class="nx">Firefox</span><span class="p">,</span> <span class="nx">and</span> <span class="nx">then</span> <span class="nx">IE</span> <span class="nx">browsers</span> <span class="k">in</span> <span class="nx">descending</span> <span class="nx">version</span> <span class="nx">number</span> <span class="nx">order</span><span class="p">.</span>

<span class="err">####</span> <span class="nx">Suspending</span> <span class="nx">Drawing</span>

<span class="nx">Every</span> <span class="err">`</span><span class="nx">connect</span><span class="err">`</span> <span class="nx">or</span> <span class="err">`</span><span class="nx">addEndpoint</span><span class="err">`</span> <span class="nx">call</span> <span class="k">in</span> <span class="nx">jsPlumb</span> <span class="nx">ordinarily</span> <span class="nx">causes</span> <span class="nx">a</span> <span class="nx">repaint</span> <span class="nx">of</span> <span class="nx">the</span> <span class="nx">associated</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">which</span> <span class="k">for</span> <span class="nx">many</span> <span class="nx">cases</span> <span class="nx">is</span> <span class="nx">what</span> <span class="nx">you</span> <span class="nx">want</span><span class="p">.</span>  <span class="nx">But</span> <span class="k">if</span> <span class="nx">you</span> <span class="nx">are</span> <span class="nx">performing</span> <span class="nx">some</span> <span class="nx">kind</span> <span class="nx">of</span> <span class="s2">&quot;bulk&quot;</span> <span class="nx">operation</span> <span class="o">-</span> <span class="nx">like</span> <span class="nx">loading</span> <span class="nx">data</span> <span class="nx">on</span> <span class="nx">page</span> <span class="nx">load</span> <span class="nx">perhaps</span> <span class="o">-</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">recommended</span> <span class="nx">that</span> <span class="nx">you</span> <span class="nx">suspend</span> <span class="nx">drawing</span> <span class="nx">before</span> <span class="nx">doing</span> <span class="nx">so</span><span class="o">:</span>

<span class="err">```</span><span class="nx">javascript</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">setSuspendDrawing</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">...</span>
<span class="o">-</span> <span class="nx">load</span> <span class="nx">up</span> <span class="nx">all</span> <span class="nx">your</span> <span class="nx">data</span> <span class="nx">here</span> <span class="o">-</span>
<span class="p">...</span>
<span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">setSuspendDrawing</span><span class="p">(</span><span class="kc">false</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p>Notice the second argument in the last call to <code>setSuspendDrawing</code>: it instructs jsPlumb to immediately perform a full repaint (by calling, internally, <code>repaintEverything</code>).</p>

<p>I said above it is recommended that you do this.  It really is.  It makes an enormous difference to the load time when you&#39;re dealing with a lot of Connections on slower browsers.</p>

<h6>doWhileSuspended</h6>

<p>This function abstracts out the pattern of suspending drawing, doing something, and then re-enabling drawing:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">doWhileSuspended</span><span class="p">(</span><span class="nx">fn</span><span class="p">,</span> <span class="p">[</span><span class="nx">doNotRepaintAfterwards</span><span class="p">]);</span>
</code></pre></div>
<p>Example usage:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">doWhileSuspended</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// import a billion things here</span>
<span class="p">});</span>
</code></pre></div>
<p>By default, this will run a repaint at the end. But you can suppress that, should you want to:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">jsPlumb</span><span class="p">.</span><span class="nx">doWhileSuspended</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// import a billion things here</span>
<span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
</code></pre></div>
<p><strong>Note</strong> just in case you take it literally, you should probably <em>not</em> attempt to import a billion things into jsPlumb. You may find that performance suffers a little.    </p>

<h4>Anchor Types</h4>

<p>Continuous anchors are the type that require the most maths, because they have to calculate their position every time a paint cycle occurs. </p>

<p>Dynamic and Perimeter anchors are the next slowest (with Perimeter being slower than most Dynamic Anchors as they are actually Dynamic Anchors that have, by default, 60 locations to choose from).  </p>

<p>Static anchors like <code>Top</code>, <code>Bottom</code> etc are the fastest.</p>

            </div>
        </div>
        
        <script type="text/javascript">

    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-15400992-4']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script>

    </body>
</html>
