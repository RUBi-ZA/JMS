{% extends "custom/JMS/master.html" %}

{% block css %}
	
	<!-- BOOTSTRAP STYLES -->
	<link href="{{ STATIC_URL }}lib/bootstrap/binary/css/bootstrap.css" rel="stylesheet" />
	
	<!-- FONTAWESOME STYLES -->
	<link href="{{ STATIC_URL }}lib/bootstrap/binary/css/font-awesome.css" rel="stylesheet" />
	
	<!-- CUSTOM STYLES -->
	<link href="{{ STATIC_URL }}lib/bootstrap/binary/css/custom.css" rel="stylesheet" />
	<link href="{{ STATIC_URL }}lib/bootstrap/binary/css/stavatech.css" rel="stylesheet" />
		
	<!-- GOOGLE FONTS -->
	<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    
    <style type="text/css" media="screen">
        #editor { 
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }
    </style>
    
{% endblock %}

{% block content %}	
    <script id="relatedObjectTemplate" type="text/html">
		<!-- ko with: { Parameter: $data } -->
		<div class="form-group">
			<select class="form-control" data-bind="value: Parameter.Value, foreach: $root.ToolVersion().ToolParameters">
				<!-- ko if: Type() == 6 -->
				    <option data-bind="value: ParameterID, text: ParameterName"></option>
				<!-- /ko -->
			</select>				
		</div>				
		<!-- /ko -->
	</script>
	
 	<script id="complexObjectTemplate" type="text/html">
 		<!-- ko with: { Parameter: $data } -->
    		<div class="form-group">
    			<label>Fields for <span data-bind='text: Parameter.ParameterName()'></span></label>
    			<div class="table-responsive">
    				<table class="table table-hover">
    					<thead>
    						<tr>
    							<th>Field Name</th>
    							<th>Field Type</th>
    							<th>Multiple?</th>
    							<th></th>
    						</tr>
    					</thead>
    					<tbody id="params-table-body" data-bind="foreach: Parameter.parameters">
    						<!-- ko if: DeleteInd() == false -->
        						<tr>
        							<td>
        								<input class="form-control" data-bind="value: ParameterName" placeholder="The text you want to display on the input page" />
        							</td>
        							<td>
        								<select class="form-control" data-bind="value: Type">
        									<option value='1'>Text</option>
        									<option value='6'>Complex Object</option>
        									<option value='7'>Related Object</option>
        								</select>
        							</td>
        							<td style="text-align: center;">
        								<input type="checkbox" value="multiple" data-bind="checked: Multiple" />
        							</td>
        							<td style="text-align:right;width:65px;">
        								
        								<a href="#" class="btn btn-danger btn-sm" data-bind="click: function() { $root.DeleteSubParameter($parent.Parameter.parameters, $data) }"><i class="fa fa-trash-o"></i></a>
        							</td>
        						</tr>
        						<tr data-bind="if: Type() == 6">
        							<td colspan='4' style='padding-left:20px;'>
        								<!-- ko template: { name: 'complexObjectTemplate' } -->
                						<!-- /ko --> 
        							</td>
        						</tr>
        						<tr data-bind="if: Type() == 7">
        							<td colspan='4' style='padding-left:20px;'>
        								<!-- ko template: { name: 'relatedObjectTemplate' } -->
                						<!-- /ko --> 
        							</td>
        						</tr>
    						<!-- /ko -->
    					</tbody>
    					<tfoot>
    						<tr>
    							<td colspan="4" style="text-align:right;">
    								<a href="#" class="btn btn-success btn-sm" data-bind="click: function() { $root.AddSubParameter(Parameter.parameters, Parameter.ParameterID()) }"><i class="fa fa-plus"></i></a>
    							</td>
    						</tr>
    					</tfoot>
    				</table>
    			</div>
    		</div>  
		<!-- /ko -->
	</script> 
	
	<script type="text/html" id="complex-object-input">
		<!-- ko with: { Parameter: $data } -->
		<div class="col-lg-12" style="padding-left:25px;" data-bind="foreach: Parameter.parameters">
			<div class="form-group" data-bind="if: InputBy() == 'user'">
				<label data-bind="text: ParameterName"></label>
										
				<div data-bind="if: Type() == 1">
					<div data-bind="if: Multiple() == false">												
						<input class="form-control" data-bind="value: Value"></input>
					</div>
					<div data-bind="if: Multiple() == true">
						<table class="table table-responsive">
							<tbody data-bind="foreach: value_items">
								<tr>
									<td>
										<input class="form-control" data-bind="value: value"></input>
									</td>
									<td style="text-align:right;">
										<a href="#" class="btn btn-danger btn-sm" data-bind="click: function() { $root.RemoveValue($parent, $data); }"><i class="fa fa-trash-o"></i></a>
									</td>
								</tr>
							</tbody>
							<tfoot>
								<tr>
									<td colspan='2' style="text-align:right">
										<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddValue"><i class="fa fa-plus"></i></a>
									</td>
								</tr>
							</tfoot>
						</table>
					</div>
				</div>
				
				<div data-bind="if: Type() == 6">
					<div data-bind="if: Multiple() == true">
						<select class="form-control" multiple data-bind="options: complex_objects, optionsText: function(item) { return item.Parameter().parameters()[0].Value(); }, selectedOptions: selected_parameters">
						</select>
						<div class='col-lg-12' style='text-align:right;'>
							<a href="#" class="btn btn-danger btn-sm" data-bind="click: $root.DeleteComplexObject" style='margin-top:5px;'><i class="fa fa-trash-o"></i></a>
							<a href="#" class="btn btn-warning btn-sm" data-bind="click: $root.EditComplexObject" style='margin-top:5px;'><i class="fa fa-edit"></i></a>
							<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddComplexObject" style='margin-top:5px;'><i class="fa fa-plus"></i></a>
						</div>
					</div>
					<div data-bind="if: Multiple() == false">
						<!-- ko template: { name: 'complex-object-input' } -->
        				<!-- /ko --> 
					</div>
				</div>
				
				<div data-bind="if: Type() == 7 && related_parameter().Multiple() == true">
					<div data-bind="if: Multiple() == true">
						<select class="form-control" multiple data-bind="options: related_parameter().complex_objects(), optionsText: function(item) { return item.Parameter().parameters()[0].Value(); }, selectedOptions: related_objects">
						</select>
					</div>
					
					<div data-bind="if: Multiple() == false">
						<select class="form-control" data-bind="options: related_parameter().complex_objects(), optionsText: function(item) { return item.Parameter().parameters()[0].Value(); },
							value: related_objects">
						</select>
					</div>
				</div>
				
			</div>
		</div>
		<!-- /ko -->
	</script>
	
	<script type="text/html" id="complex-dialog">
		
		<div class="modal fade" data-bind="attr: { id: 'object-dialog-' + $index() }" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title" id="myModalLabel">Add <span data-bind="text: $data.ParameterName"></span></h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				    	<!-- ko template: { name: 'complex-object-input' } -->
						<!-- /ko --> 
				    </div>
				    <div class="modal-footer">
				    	<span data-bind='if: $root.ObjectMode() == "add"'>
				       		<a class="btn btn-default" data-bind="click: $root.SaveComplexObject"><i class="fa fa-save"></i> Save</a>
				       	</span>
				       	<span data-bind='if: $root.ObjectMode() == "edit"'>
				       		<button class="btn btn-default" data-dismiss="modal">Close</button>
				       	</span>
					</div>
				</div>
		   	</div>
	 	</div>
	 	 
	</script>
	
    <div class="modal fade" id="question-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    </div>
    
	<div id="tools" class="page-wrapper" >
	    <!-- MODALS -->
	    <!-- ko template: { name: 'complex-dialog', foreach: $root.NewObjects } -->
		<!-- /ko --> 
				
	    <!-- submit-dialog -->
	    <div class="modal fade" id="submit-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
				    <div class="modal-body">
				    	<div style="text-align:center">
				    		<div style="height:130px;" data-bind="visible: $root.submitting()">
								<img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px;" /> <br/>
								<img src="{{ STATIC_URL }}img/text_loader.gif" style="height: 30px;"/> <br/>
							</div>
							
				    		<div style="height:130px;" data-bind="visible: $root.submitting() == false && $root.submit_success() == true">
								<img src="{{ STATIC_URL }}img/success.png" style="height:100px;" /> <br/>
								<img src="{{ STATIC_URL }}img/job_started.gif" style="height: 30px;"/> <br/>
							</div>
							
				    		<div style="height:130px;" data-bind="visible: $root.submitting() == false && $root.submit_success() == false">
								<img src="{{ STATIC_URL }}img/error.png" style="height:100px;" /> <br/>
								<img src="{{ STATIC_URL }}img/job_failed.gif" style="height: 30px;"/> <br/>
							</div>
						</div>
				   	</div>
				  	<div class="modal-footer" data-bind="visible: $root.submitting() == false">
				  		<span data-bind="if: $root.submit_success()">
				       		<a class="btn btn-default" data-bind="attr: { href: '/jobs/#' + $root.job_id() }">Go to job</a>
				       	</span>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	
	    <!-- loading modal -->
	    <div class="modal fade" id="loading-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
				    <div class="modal-body" style="overflow:hidden;">
				        <div style="text-align: center;">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				</div>
		   	</div>
	 	</div>
	 	
	    <!-- add tool modal -->
	    <div class="modal fade" id="tool-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-bind="with: $root.Tool">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Add Tool:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.creating_tool() == false">
				            <div class="form-group">
				                <label>Tool name</label>
				                <input class="form-control" data-bind="value: ToolName" />
				            </div>
				            
				            <div class="form-group">
				                <label>Category</label>
				                <select class="form-control" data-bind="value: Category, options: $root.Categories, 
				                    optionsText: function(item) { return item.CategoryName(); },
				                    optionsValue: function(item) { return item.CategoryID(); }" >
				                </select>
				                
				                <div style="width:100%;text-align:right;">
				                    <a href="#" data-bind="click: $root.ShowAddCategory"><i class="fa fa-plus"></i> Add new category...</a>
				                </div>
				            </div>
				            
				            <div class="form-group">
				                <label>Description (max length: 100 characters)</label>
				                <textarea class="form-control" data-bind="value: ToolDescription"></textarea>
				            </div>
				        </div>
				        
				        <div id="add-tool-error"></div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.creating_tool">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.creating_tool() == false">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.AddTool"><i class="fa fa-plus"></i> Add Tool</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- add tool category modal -->
	    <div class="modal fade" id="add-category-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Add Category:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.creating_category() == false">
				            <div class="form-group">
				                <label>Category name</label>
				                <input class="form-control" data-bind="value: $root.new_category_name" />
				            </div>
				        </div>
				        
				        <div id="add-category-error"></div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.creating_category">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.creating_category() == false">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.AddCategory"><i class="fa fa-plus"></i> Add Category</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- edit category modal -->
	    <div class="modal fade" id="edit-category-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-bind="with: $root.Category">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Edit Category:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.creating_category() == false">
				            <div class="form-group">
				                <label>Category name</label>
				                <input class="form-control" data-bind="value: $root.new_category_name" />
				            </div>
				            
				            <div id="edit-category-error"></div>
				        </div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.creating_category">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.creating_category() == false">
				       	<button type="button" class="btn btn-info" data-bind="click: $root.UpdateCategory"><i class="fa fa-save"></i> Save</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- add file type modal -->
	    <div class="modal fade" id="add-file-type-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Add File Type:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.creating_file_type() == false">
				            <div class="form-group">
				                <label>File Type Name</label>
				                <input class="form-control" data-bind="value: $root.new_file_type" />
				            </div>
				        </div>
				        
				        <div id="add-file-type-error"></div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.creating_file_type">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.creating_file_type() == false">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.AddFileType"><i class="fa fa-plus"></i> Add File Type</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- add file modal -->
	    <div class="modal fade" id="add-file-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Add File:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.creating_file() == false">
				            <div class="form-group">
				                <label>File Name</label>
				                <input class="form-control" data-bind="value: $root.new_file_name" />
				            </div>
				        </div>
				        
				        <div id="add-file-error"></div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.creating_file">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.creating_file() == false">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.AddFile"><i class="fa fa-plus"></i> Add File</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- publish modal -->
	    <div class="modal fade" id="publish-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Publish tool:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div class="col-lg-12">
				            <div class="col-lg-12">
				                Make sure that have saved the tool, before you publish.<br/><br/>
				            </div>
				            
				            <div class="col-lg-4" style="text-align:center">
        				        <label>Major Release</label>
    							<input class="form-control" type="number" data-bind="value: $root.major"/>
			                </div>
			                
				            <div class="col-lg-4" style="text-align:center">
        				        <label>Minor Release</label>
    							<input class="form-control" type="number" data-bind="value: $root.minor"/>
                            </div>
                            
				            <div class="col-lg-4" style="text-align:center">
        				        <label>Patch Release</label>
    							<input class="form-control" type="number" data-bind="value: $root.patch"/>
    		                </div>
    							
                		</div>
				    </div>
				    <div class="modal-footer">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.PublishVersion"><i class="fa fa-plus"></i> Publish</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- permissions modal -->
	    <div class="modal fade" id="permissions-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content" data-bind="with: $root.Tool">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Share Tool: <span data-bind='text: ToolName'></span></h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.loading_perms() == false">
				            <div class="form-group">
				                <label>Tool Owner</label><br/>
				                <span data-bind="text: User().Username"></span>
				            </div>
    			                
				            <div class="form-group">
        							<input type="checkbox" data-bind="checked: $root.Tool().PublicInd, event: { change: $root.UpdateToolAvailability }"/>
            				        <label>Make publically available?</label><br/>
            				        <span class="col-lg-12" style="font-size:8pt;padding:0px;padding-bottom:10px;">												
										Publically available tools can be <strong>run</strong> by anyone on the system.
									</span>
                            </div>
				            
				            <div class="form-group">
				                <div id="table-responsive" style="padding:15px;padding-bottom:15px;">
								    <div style="width:100%">
								        <label>
								            User Permissions
								        </label>
								        <hr class="st-hr"/>
    									<div>
    									    <table class="table table-striped table-hover" style="text-align:center">
    											<thead>
    											 	<tr>
    											 		<th style="text-align:center">User</th>
    											 		<th style="text-align:center">Run</th>
    											 		<th style="text-align:center">Export</th>
    											 		<th style="text-align:center">Edit</th>
    											 		<th style="text-align:center">Publish</th>
    											 		<th style="text-align:center">Admin</th>
    											 		<th style="text-align:center"></th>
    											 	</tr>
    											</thead>
    											<!-- ko if: UserToolPermissions().length > 0 -->
    											<tbody data-bind="foreach: UserToolPermissions" style="padding-bottom:40px;">
    												<tr>
    												    <td data-bind="text: User().Username"></td>
    												    <td>
    												        <!-- ko if: Run() == true -->
    												            <i class="fa fa-check-square-o"></i> 
    												        <!-- /ko -->
    												        <!-- ko if: Run() == false -->
    												            <i class="fa fa-times"></i> 
    												        <!-- /ko -->
    												    </td>
    												    <td>
    												        <!-- ko if: Export() == true -->
    												            <i class="fa fa-check-square-o"></i> 
    												        <!-- /ko -->
    												        <!-- ko if: Export() == false -->
    												            <i class="fa fa-times"></i> 
    												        <!-- /ko -->
    												    </td>
    												    <td>
    												        <!-- ko if: Edit() == true -->
    												            <i class="fa fa-check-square-o"></i> 
    												        <!-- /ko -->
    												        <!-- ko if: Edit() == false -->
    												            <i class="fa fa-times"></i> 
    												        <!-- /ko -->
    												    </td>
    												    <td>
    												        <!-- ko if: Publish() == true -->
    												            <i class="fa fa-check-square-o"></i> 
    												        <!-- /ko -->
    												        <!-- ko if: Publish() == false -->
    												            <i class="fa fa-times"></i> 
    												        <!-- /ko -->
    												    </td>
    												    <td>
    												        <!-- ko if: Admin() == true -->
    												            <i class="fa fa-check-square-o"></i> 
    												        <!-- /ko -->
    												        <!-- ko if: Admin() == false -->
    												            <i class="fa fa-times"></i> 
    												        <!-- /ko -->
    												    </td>
    												    <td style="text-align:center;">
    												    	<a href="#" data-bind="click: $root.EditShare" class="btn btn-warning">
    												    	    <i class="fa fa-edit"></i>
    												    	</a>
    												    	<a href="#" data-bind="click: $root.UnshareTool" class="btn btn-danger">
    												    	    <i class="fa fa-trash-o"></i>
    												    	</a>
    													</td>
    												</tr>
    											</tbody>
    											<!-- /ko -->
    											<!-- ko if: UserToolPermissions().length == 0 -->
    											<tbody>
    											    <tr>
    											        <td colspan="6">
    											            This tool has not been shared with any other users.
    											        </td>
    											        <td></td>
    											    </tr>
    											</tbody>
    											<!-- /ko -->
    											<tfoot>
    											    <tr>
    											        <td colspan="6"></td>
    											        <td style="text-align:center;">
    												    	<a href="#" class="btn btn-success" data-bind="click: $root.ShowShareTool">
    												    	    <i class="fa fa-plus"></i>
    												    	</a>
    													</td>
    											    </tr>
    											</tfoot>
    										</table>
    									</div>
    								</div>
    							</div>
				            </div>
				        </div>
				        
				        <div id="permissions-error"></div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.loading_perms">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.loading_perms() == false">
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- share modal -->
	    <div class="modal fade" id="share-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
				    	<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				     	<h4 class="modal-title">Share tool:</h4>
				  	</div>
				    <div class="modal-body" style="overflow:hidden;">
				        <div data-bind="visible: $root.sharing() == false">
    				        <div class="col-lg-12" data-bind="with: $root.NewShare">
    			                
    				            <div class="form-group">
            				        <label>Username</label>
        							<input class="form-control" type="text" data-bind="value: User().Username"/>
                                </div>
                                
                                <label>Permissions</label>
                                <hr/>
    				            <div class="col-lg-12">
        				            <div class="form-group">
            							<input type="checkbox" data-bind="checked: Run"/>
                				        <label>Run?</label>
        			                </div>
        				            
        				            <div class="form-group">
            							<input type="checkbox" data-bind="checked: Export"/>
                				        <label>Export?</label>
        			                </div>
        				            
        				            <div class="form-group">
            							<input type="checkbox" data-bind="checked: Edit"/>
                				        <label>Edit?</label>
        			                </div>
        				            
        				            <div class="form-group">
            							<input type="checkbox" data-bind="checked: Publish"/>
                				        <label>Publish?</label>
        			                </div>
        				            
        				            <div class="form-group">
            							<input type="checkbox" data-bind="checked: Admin"/>
                				        <label>Administrate?</label>
        			                </div>
        						</div>	
                    		</div>
    				        
    				        <div id="share-error"></div>
				        </div>
				        
				        <div style="text-align: center;" data-bind="visible: $root.sharing">
	                        <img src="{{ STATIC_URL }}img/big_red_loader.gif" style="height:100px"> <br>
	                        <img src="{{ STATIC_URL }}img/text_loader.gif" style="height:30px"> <br>
                        </div>
				    </div>
				    <div class="modal-footer" data-bind="visible: $root.sharing() == false">
				       	<button type="button" class="btn btn-success" data-bind="click: $root.ShareTool"><i class="fa fa-share"></i> Share</button>
				       	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
		   	</div>
	 	</div>
	 	
	 	<!-- END MODALS -->
	    
		<div class="page-inner">
			<div style="text-align: center;" data-bind="visible: $root.loading">
				<img src="{{ STATIC_URL }}img/big_red_loader.gif"> <br>
				<img src="{{ STATIC_URL }}img/text_loader.gif"> <br>
			</div>
		    
			<div style="display:none;" data-bind="visible: $root.loading() == false">
			    <div id="tools-list">    
					<div class="row">
						<div class="col-md-12">
							<h2><i class="fa fa-wrench"></i> Tools</h2>
						</div>
					</div>
					<!-- /. ROW  -->
						    
					<hr />
				
					<div class="row">
						<div class="col-lg-12"> 
							<div class="col-lg-12" style="width:100%;padding:10px;padding-top:0;">
								<div class="btn-group" style="float:left;">
							  		<a class="btn btn-primary" href="#custom"><i class="fa fa-play"></i> Custom Job</a>
								</div>
								<div class="btn-group" style="float:right;">
							  		<button class="btn btn-success" data-bind="click: $root.ShowAddTool"><i class="fa fa-plus"></i> Add Tool</button>
							  		<button data-toggle="dropdown" class="btn btn-success dropdown-toggle"><span class="caret"></span></button>
							  		<ul class="dropdown-menu" style="text-align:left;">
										<li><a href="#" data-bind="click: $root.ShowImportTool"><i class="fa fa-download"></i> Import Tool</a></li>	
										<li><a href="#" data-bind="click: $root.ShowAddCategory"><i class="fa fa-plus"></i> Add Category</a></li>										
							  		</ul>
								</div>
							</div>
						</div>
					</div>
					<!-- /. ROW -->
					
					<div class="row">	
						<div class="col-lg-12"> 
						    <div class="panel panel-danger">
								<div class="panel-heading" style="overflow:hidden;">
									<label>Tools:</label>
									<div class="st-filter">
									</div>
								</div>
								<div class="panel-body" style="overflow-y:auto;padding:0px;">
								    
									<div id="table-responsive" style="overflow-y:auto; padding:15px;padding-bottom:15px;" data-bind="foreach: $root.Categories">
									    <div style="width:100%">
									        <a class="st-link-header-2" data-bind="click: $root.ToggleVisible">
									            <!-- ko if: Visible() == false -->
									                <i class="fa fa-plus-square-o"></i> 
									            <!-- /ko -->
									            
									            <!-- ko if: Visible() == true -->
									                <i class="fa fa-minus-square-o"></i> 
									            <!-- /ko -->
									            
									            <span data-bind="text: CategoryName()"></span>
									            (<span data-bind="text: Tools().length"></span>)
									        </a>
									        <a href="#" title="Edit category" style="float:right" data-bind="click: $root.ShowUpdateCategory">
									            <i class="fa fa-edit"></i>
									        </a>
									        <hr class="st-hr"/>
        									<div data-bind="attr: { id: 'category_' + CategoryID() }" style="display:none">
        									    <table class="table table-striped table-hover" style="min-width:500px;">
        											<thead>
        											 	<tr>
        											 		<th>Tool Name</th>
        											 		<th>Description</th>
        											 		<th style="text-align:center">Public?</th>
        											 		<th style="text-align:center">Latest Version</th>
        											 		<th style="width:220px;text-align:center;">Options</th>
        											 	</tr>
        											</thead>
        											<tbody data-bind="foreach: Tools" style="padding-bottom:40px;">
        												<tr >
        												    <td data-bind="text: ToolName"></td>
        												    <td data-bind="text: ToolDescription"></td>
        												    <td style="text-align:center">
        												        <!-- ko if: PublicInd() == true -->
        												            <i class="fa fa-check-square-o"></i> 
        												        <!-- /ko -->
        												        
        												        <!-- ko if: PublicInd() == false -->
        												            <i class="fa fa-times"></i> 
        												        <!-- /ko -->
        												    </td>
        												    <td style="text-align:center" data-bind="text: ToolVersions()[0].ToolVersionNum"></td>
        												    <td style="text-align:center;">
        												    	<div class="btn-group">
        													  		<a class="btn btn-danger" data-bind="attr: { href: '#run/' + ToolID()}"><i class="fa fa-play"></i> Run</a>
        													  		<button data-toggle="dropdown" class="btn btn-danger dropdown-toggle"><span class="caret"></span></button>
        													  		<ul class="dropdown-menu" style="text-align:left;">
        																<li><a href="#" data-bind="attr: { href: '#edit/' + ToolID()}"><i class="fa fa-edit"></i> Edit</a></li>
        																<li><a href="#" data-bind="click: $root.ShowToolPermissions"><i class="fa fa-share-square-o"></i> Share</a></li>
        																<li><a href="#" data-bind="attr: { href: '/api/jms/tools/' + ToolVersions()[0].ToolVersionID + '/export' } "><i class="fa fa-upload"></i> Export</a></li>
        																<li style="border-bottom:1px solid rgba(0, 0, 0, .15)"></li>
        																<li><a href="#" data-bind="click: function() { $root.DeleteTool($data, $parent); }"><i class="fa fa-trash-o"></i> Delete</a></li>
        													  		</ul>
        														</div>
        												    </td>
        												</tr>
        											</tbody>
        										</table>
        									</div>
        								</div>
									</div>									
										        
									<div class="col-lg-12 panel-footer" style="padding-top:10px;background:white;">
										<label>No. of Tools: </label> <span data-bind="text: $root.NumTools"></span>
									</div>
								</div>
							</div>
						</div>
					
					</div>
					<!-- /. ROW  -->
				</div>
				
				<div id="tool-editor" style="display:none" data-bind="with: $root.ToolVersion"> 
					
					<div class="row" id="edit-tool-error">
					</div>
					<div class="row">
						<div class="col-md-12">
							<h2><i class="fa fa-wrench"></i> Edit: <span data-bind="text: Tool().ToolName"></span></h2>
						</div>
					</div>
					<!-- /. ROW  -->
						    
					<hr />
				
					<div class="row">				
						<div class="col-lg-12" style="text-align:right;padding-right:40px;padding-bottom:10px;">
							<a href="#" class="btn btn-info" style="width:100px" data-bind="click: $root.UpdateTool">
								<i class="fa fa-save"></i> 
								Save
							</a>
							
							<a href="#" class="btn btn-warning" data-bind="attr: { href: '/tools/#' }">
							    <i class="fa fa-arrow-left"></i> 
							    Back
							</a>
						</div>
						<div class="col-lg-12" style="padding:10px;padding-top:0;">	
						</div>
					</div>
					<!-- /. ROW  -->
				    
				    <div class="row">
				        <div class="col-lg-12">	
					
        					<div id="edit-tool-error">
        					</div>	
        					
						    <div role="tabpanel">
						        <ul class="nav nav-tabs" role="tablist">
                                    <li role="presentation" class="active">
                                        <a href="#general" aria-controls="general" role="tab" data-toggle="tab">General</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#input" aria-controls="input" role="tab" data-toggle="tab">Input</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#output" aria-controls="output" role="tab" data-toggle="tab">Output</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#files" aria-controls="files" role="tab" data-toggle="tab">Files/Scripts</a>
                                    </li>
                                    <li role="presentation">
                                        <a href="#resources" aria-controls="resources" role="tab" data-toggle="tab">Resources</a>
                                    </li> 
                                    <li role="presentation">
                                        <a href="#versions" aria-controls="versions" role="tab" data-toggle="tab">Versions</a>
                                    </li>  
						        </ul>
						        <div class="tab-content">
						            <div role="tabpanel" class="tab-pane fade in active" id="general">
						                <div class="col-lg-12">
                                            <h4>Tool Details</h4>
            							    <hr/>
                                            <div class="col-lg-12">
                                            	<div class="form-group">
                                            		<label>Tool name</label>
                                            		<input class="form-control" data-bind="value: Tool().ToolName" placeholder="Enter tool name"></input>
                                            	</div>
                                            </div>
                                            
                                            <div class="col-lg-6">
                                            	<div class="form-group">
                                            		<label>Created On</label>
                                            		<label class="form-control" data-bind="text: DatePublished"></label>
                                            	</div>
                                            </div>
                                            
                                            <div class="col-lg-6">
                                            	<div class="form-group">
                                            		<label>Category</label>
                                                    <select class="form-control" data-bind="value: Tool().Category, options: $root.Categories, 
                                                        optionsText: function(item) { return item.CategoryName(); },
                                                        optionsValue: function(item) { return item.CategoryID(); }" >
                                                    </select>
                                            	</div>
                                            </div>
                                            
                                            <div class="col-lg-12">
                                            	<div class="form-group">
                                            		<label>Short Description (Max 100 characters)</label>
                                            		<textarea class="form-control" data-bind="value: ShortDescription" placeholder="Enter a description less than 100 characters in length"></textarea>
                                            	</div>
                                            </div>
                                            	
                                            <div class="col-lg-12">
                                                <div class="form-group">
                                            		<label>Long Description</label>
                                            		<textarea class="form-control" data-bind="value: LongDescription" placeholder="Enter a long description"></textarea>
                                            	</div>
                                            </div>
                						</div>
						            </div>
                                    <div role="tabpanel" class="tab-pane fade" id="input">
                                        <div class="col-lg-12">
                                            <h4>Required Input to Execute Tool</h4>
                                            <hr/>
                                            Specify the command and arguments/parameters required to execute this tool. The current input will generate the following command: <br/>
                                            <div class="form-group">
                                                <code>
                                                    <span data-bind="text: Command"></span>
                                                    <!-- ko foreach: ToolParameters -->
                                                        <span data-bind="text: Context"></span>
                                                        <!-- ko if: InputBy() == "user" -->
                                                            &lt;user_input_arg&gt;
                                                        <!-- /ko -->
                                                        <!-- ko if: InputBy() == "system" -->
                                                            <span data-bind="text: Value"></span>
                                                        <!-- /ko -->
                                                    <!-- /ko -->
                                                </code>
            							    </div>
            							    
            							    <hr/>
            							    
                                            <div class="form-group">
                                                <label>Command (without arguments)</label>
                                                <input type="text" class="form-control" data-bind="value: Command" />
                                            </div>
                                            
                                            <hr/>
                                            
                                            <div class="form-group">
                                                <label>Parameters</label>
                                            </div>
                                            
                                            <div class="form-group">
                                                <div class="col-lg-3">
                    								<div style="text-align:right;padding-right:10px;padding-bottom:10px;">
                    									<select multiple class="form-control" style="padding:0;height:130px;" data-bind="options: ToolParameters, 
                    									    optionsText: function(item) { return item.ParameterName; }, selectedOptions: $root.SelectedParameters">										
                    									</select>
                    								</div>
                    							
                    								<div style="padding-right:10px;padding-bottom:20px;">
                    									<!--<div style="float:left">
                    										<a href="#" class="btn btn-default" data-bind="click: $root.ShiftParamDown">
                    											<i class="fa fa-arrow-down"></i>
                    										</a>
                    										<a href="#" class="btn btn-default" data-bind="click: $root.ShiftParamUp">
                    											<i class="fa fa-arrow-up"></i>
                    										</a>
                    									</div>-->
                    									<div style="float:right">
                    										<a href="#" class="btn btn-danger" data-bind="click: $root.DeleteParameter, visible: $root.SelectedParameters().length > 0"><i class="fa fa-trash-o"></i></a>
                    										<a href="#" class="btn btn-success" data-bind="click: $root.AddParameter"><i class="fa fa-plus"></i></a>
                    									</div>
                    								</div>
                    							</div>
                    							
                    							<div class="col-lg-9" data-bind="with: $root.SelectedParameters()[0]">
                    							    <h4>Edit Parameter</h4>
                    							    <hr/>
                    							    <div class="form-group">
                    								    <label>Parameter Label</label>
                    								    <input class="form-control" data-bind="value: ParameterName"  />
                    							    </div>
                    							    <div class="form-group">
                    								    <input type="checkbox" data-bind="value: OptionalInd"  />
                    								    <label> Optional?</label>
                    							    </div>
                    							    <div class="form-group">
                    								    <label>Input By</label>
                    								    <select class="form-control" data-bind="value: InputBy" >
                    								        <option value="user">User</option>
                    								        <option value="system">System</option>
                    								    </select>
                    							    </div>
                    							    <div class="form-group">
                    								    <label>Context/Flag</label>
                    								    <input class="form-control" data-bind="value: Context"  />
                    							    </div>
                    							    <div class="form-group">
                    								    <label>Parameter Type</label>
                    								    <select class="form-control" data-bind="value: Type,
                    								        options: $root.ParameterTypes,
                    								        optionsValue: function(item) { return item.ParameterTypeID(); },
                    								        optionsText: function(item) { return item.ParameterTypeName(); }">
                    								    </select>
                    							    </div>
                    							    
                    							    <div class="form-group" style="overflow:hidden;">
										
                    									<!-- ko if: Type() == 1 -->
                    										<div data-bind="if: InputBy() == 'system'">	
                    											<label>Value</label>
                    											<input class="form-control" data-bind="value: Value"></input>	
                    										</div>
                    										
                    										<div class="form-group">
                    											<input type="checkbox" data-bind="checked: Multiple"></input> <label>Multiple inputs?</label>
                    										</div>
                    										
                											<div class="form-group" data-bind="if: Multiple">
                												<label>Delimiter</label>
                												<input class="form-control" data-bind="value: Delimiter" />
                											</div>
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 2 -->
                    										<div data-bind="if: InputBy() == 'system'">	
                    											<label>Value</label>
                    											<input class="form-control" type="number" data-bind="value: Value"></input>
                    										</div>
                    										
                    										<div class="form-group">
                    											<input type="checkbox" data-bind="checked: Multiple"></input> <label>Multiple inputs?</label>
                    										</div>
                    											
                											<div class="form-group" data-bind="if: Multiple">
                												<label>Delimiter</label>
                												<input class="form-control" data-bind="value: Delimiter" />
                											</div>
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 3 -->
                    										<label>Value</label>
                    										<input class="form-control" data-bind="value: Value"></input>	
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 4 -->
                										
                											<input type="checkbox" value="multiple" data-bind="checked: Multiple"></input> <label>Allow multiple options to be selected?</label>
                											
                											<div class="form-group" data-bind="if: Multiple">
                												<label>Delimiter</label>
                												<input class="form-control" data-bind="value: Delimiter" />
                											</div>
                											
                											<div class="table-responsive">
                												<table class="table table-hover">
                													<thead>
                														<tr>
                															<th>Option Text</th>
                															<th>Option Value</th>
                															<th></th>
                														</tr>
                													</thead>
                													<tbody id="params-table-body" data-bind="foreach: ParameterOptions">
                														<!-- ko if: DeleteInd() == false -->
                														<tr>
                															<td>
                																<input class="form-control" data-bind="value: ParameterOptionText" placeholder="The label you want to display on the input page" />
                															</td>
                															<td>
                																<input class="form-control" data-bind="value: ParameterOptionValue" placeholder="The value that will be sent to the server if the option is selected by the user" />
                															</td>
                															<td style="text-align:right;width:65px;">
                																<a href="#" class="btn btn-danger btn-sm" data-bind="click: $root.DeleteParameterOption"><i class="fa fa-trash-o"></i></a>
                															</td>
                														</tr>
                														<!-- /ko -->
                													</tbody>
                													<tfoot>
                														<tr>
                															<td colspan="3" style="text-align:right;">
                																<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddParameterOption"><i class="fa fa-plus"></i></a>
                															</td>
                														</tr>
                													</tfoot>
                												</table>
                											</div>
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 5 && InputBy() == 'user' -->
                    										<input type="checkbox" value="multiple" data-bind="checked: Multiple"/> <label>Upload multiple files?</label>
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 6 && InputBy() == 'user' -->
                    										<span class="col-lg-12" style="font-size:8pt;padding:0px;padding-bottom:10px;">												
                    											Complex objects are submitted as a JSON string. The receiving script should be set up to handle this.
                    										</span>
                    											
                											<input type="checkbox" data-bind="checked: Multiple"/> <label>Multiple inputs?</label>
                											
                											<br/>
                											<br/>
                											
                											<div  data-bind="template: { name: 'complexObjectTemplate', data: $data }">
                											</div>
                    									<!-- /ko -->
                    									
                    									<!-- ko if: Type() == 7 && InputBy() == 'user' -->
                    									    <div class="col-lg-12" data-bind="template: { name: 'relatedObjectTemplate' }">
                    									    </div>	
                    									<!-- /ko -->
                    								</div>
                    							</div>
                    						</div>
                                        </div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="output">
                                        <div class="col-lg-12">
                                            <h4>Expected Output Files</h4>
                                            <hr/>
                                            Tools should save all outputs to one or more files. Add the names of the files that are expected to be produced by this
                                            tool to the table below:
                                            <hr/>
                                            <div class="form-group">
                                    			<div class="table-responsive">
                                    				<table class="table table-hover">
                                    					<thead>
                                    						<tr>
                                    							<th>Output Label</th>
                                    							<th>File Name</th>
                                    							<th style="max-width:200px;">File Type</th>
                                    							<th style="width:40px;"></th>
                                    						</tr>
                                    					</thead>
                                    					<tbody id="output-table-body" data-bind="foreach: $root.ToolVersion().ExpectedOutputs">
            												<!-- ko if: DeleteInd() == false -->
            												<tr>
            													<td>
            														<input class="form-control" data-bind="value: OutputName" />
            													</td>
            													<td>
            														<input class="form-control" data-bind="value: FileName" />
            													</td>
            													<td style="max-width:200px;">
            														<select class="form-control" data-bind="value: FileType,
            														    options: $root.FileTypes, optionsText: function(item) { return item.FileTypeName() },
            														    optionsValue: function(item) { return item.FileTypeID() }">
            														</select>
            													</td>
            													<td style="text-align:right;width:65px;">
            														<a href="#" class="btn btn-danger btn-sm" data-bind="click: $root.DeleteExpectedOutput"><i class="fa fa-trash-o"></i></a>
            													</td>
            												</tr>
            												<!-- /ko -->
            											</tbody>
                                    					<tfoot>
            												<tr>
            												    <td colspan="2"></td>
            												    <td>
            												        <a href="#" data-bind="click: $root.ShowAddFileType"><i class="fa fa-plus"></i> Add new file type...</a>
            												    </td>
            													<td style="text-align:right;">
            														<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddExpectedOutput"><i class="fa fa-plus"></i></a>
            													</td>
            												</tr>
            											</tfoot>
                                    				</table>
                                    			</div>
                                    		</div>
                                        </div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="files">
                                        <div class="col-lg-12">
                                            <h4>Required Scripts and Data Files</h4>
                                            <hr/>
                                            Upload and edit any scripts and/or files required by this tool:
                                            <hr/>
                                            <div class="col-lg-12">
                                            </div>
                                            <div class="col-lg-2">
                								
                                                <div class="form-group" style="overflow:hidden">
                                                    <label>Upload Files/Scripts</label>
                                                    <input id="file_upload" type="file" multiple class="form-control"/>
                                                    <a href="#" id="upload_file_btn" style="float:right;margin-top:5px;" class="btn btn-info" data-bind="click: $root.UploadFiles">
                										<i class="fa fa-upload"></i>
                										<img src="{{ STATIC_URL }}img/small_blue_loader.gif" style="display:none" />
                										<span></span>
                									</a>
                                                </div>
                								
                                                <div id="upload_alert-container" class="form-group" style="overflow:hidden">
                                                    
                                                </div>
                                                
                                                <div class="form-group" style="overflow:hidden">
                                                    <label>Files/Scripts</label>
                                                    <select multiple class="form-control" style="padding:0;height:230px;", data-bind="options: $root.ToolVersion().Files,
                                                        optionsText: function(item) { return item.FileName(); }, selectedOptions: $root.SelectedFiles">
                                                    </select>
                									
                                                    <a href="#" style="float:right;margin-top:5px;" class="btn btn-success" data-bind="click: $root.ShowAddFile">
                                                        <i class="fa fa-plus"></i>
                                                    </a>
                                                    
                									<a href="#" style="float:right;margin-top:5px;margin-right:5px;" class="btn btn-danger" data-bind="click: $root.DeleteFile">
                									    <i class="fa fa-trash-o"></i>
                									</a>
                								</div>
                                            </div>
                                            <div class="col-lg-10" data-bind="with: $root.SelectedFile">
                                                
                                                <h4>Edit File: <span data-bind="text: FileName"></span></h4>
                                                <hr/>
                                                
                                                <div class="form-group" style="overflow:hidden">
                                                    <div id="save-file-error"></div>
                                                    <a href="#" style="float:right;margin-top:5px;" class="btn btn-info" data-bind="click: $root.SaveFile">
                										<i class="fa fa-save"></i>
                									</a>
                                                </div>
								
                								<div style="width:100%">
                									<textarea id="ace-editor"></textarea>
                								</div>
                								
                                            </div>
                                        </div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="resources">
                                        <div class="col-lg-12">
                                            <h4>Specify Resources</h4>
                                            <hr/>
                                            Specify the required resources to run this tool:
                                            <hr/>
                                            
                                            <div class="col-lg-12" data-bind="foreach: $root.ToolVersion().DefaultResources()">
                								<!-- ko if: ValueType() == 1 -->
                                                <div class="col-lg-6">
                                                    <div class="form-group" style="padding:5px;">
                                                        <label data-bind="text: Label"></label>
                                                        <input type="text" class="form-control" data-bind="value: Value" />
                                                    </div>
                                                </div>
                                                <!-- /ko -->
                                                
                                                <!-- ko if: ValueType() == 2 -->
                                                <div class="col-lg-6">
                                                    <div class="form-group" style="padding:5px;">
                                                        <label data-bind="text: Label"></label>
                                                        <input type="number" class="form-control" data-bind="value: Value" />
                                                    </div>
                                                </div>
                                                <!-- /ko -->
                                                
                                                <!-- ko if: ValueType() == 3 -->
                                                <div class="col-lg-6">
                                                    <div class="form-group" style="padding:5px;">
                                                        <input type="checkbox" data-bind="checked: Value" />
                                                        <label data-bind="text: Label"></label>
                                                    </div>
                                                </div>
                                                <!-- /ko -->
                                                
                                                <!-- ko if: ValueType() == 4 -->
                                                <div class="col-lg-6">
                                                    <div class="form-group" style="padding:5px;">
                                                        <label data-bind="text: Label"></label>
                                                        <input disabled class="form-control" data-bind="value: Value" />
                                                    </div>
                                                </div>
                                                <!-- /ko -->
                							</div>
                                        </div>
                                    </div>
                                    <div role="tabpanel" class="tab-pane fade" id="versions">
                                        <div class="col-lg-12">
                                            <h4>Version Control</h4>
                                            <hr/>
                                            Publish new versions of this tool or revert to older versions:
                                            <hr/>
                                            <div class="col-lg-2">
                                                <div class="form-group" style="overflow:hidden">
                                                    <label>Releases</label>
                                                    <select multiple class="form-control" style="padding:0;height:230px;", data-bind="options: $root.ToolVersions,
                                                        optionsText: function(item) { return item.ToolVersionNum(); }, selectedOptions: $root.SelectedVersions">
                                                    </select>
                									
                                                    <a href="#" style="float:right;margin-top:5px;" class="btn btn-success" data-bind="click: $root.ShowPublishVersion">
                                                        <i class="fa fa-plus"></i>
                                                    </a>
                								</div>
                								
                                                <div id="version-tool-error" class="form-group" style="overflow:hidden">
                                                    
                                                </div>
                                            </div>
                                            <div class="col-lg-10" data-bind="with: $root.SelectedVersion">
                                                
                                                <h4>Version: <span data-bind="text: ToolVersionNum"></span></h4>
                                                <hr/>
                                                
                                                <div class="col-lg-12">
                								    <div class="col-lg-12">
                        								<a href="#" style="float:right;margin-top:5px;" class="btn btn-warning" data-bind="click: $root.RevertVersion">
                                                            <i class="fa fa-mail-reply"></i> Revert
                                                        </a>
                                                        
                    									<h4>Version Details</h4>
                    									<hr/>
                                            			<div class="col-lg-12">
                            								<div class="form-group">
                            									<label>Date Published</label><br/>
                            									<span data-bind="text: DatePublished"></span>
                            								</div>
                            								
                            								<div class="form-group">
                            									<label>Short Description</label><br/>
                            									<span data-bind="text: ShortDescription"></span>
                            								</div>
                            								
                            								<div class="form-group">
                            									<label>Long Description</label><br/>
                            									<span data-bind="text: LongDescription"></span>
                            								</div>
                        								</div>
                    								</div>
                    								
                    								<div class="col-lg-12">
                    								    <hr/>
                    									<h4>Required inputs</h4>
                    									<hr/>
                                            			<div class="col-lg-12">
                                            			   <div class="table-responsive">
                            									<table class="table table-hover">
                                                					<thead>
                                                						<tr>
                                                							<th>Parameter Label</th>
                                                							<th>Parameter Type</th>
                                                							<th>Context</th>
                                                							<th>Input By</th>
                                                						</tr>
                                                					</thead>
                                                					<tbody data-bind="foreach: ToolParameters">
                        												<tr>
                        													<td>
                        														<span data-bind="text: ParameterName"></span>
                        													</td>
                        													<td>
                        														<span data-bind="text: Type"></span>
                        													</td>
                        													<td>
                        														<span data-bind="text: Context"></span>
                        													</td>
                        													<td>
                        														<span data-bind="text: InputBy"></span>
                        													</td>
                        												</tr>
                        											</tbody>
                                                				</table>
                                                			</div>
                                            			</div>	
                    								</div>
                    								
                    								<div class="col-lg-12">
                    								    <hr/>
                    									<h4>Expected outputs</h4>
                    									<hr/>
                    									<div class="col-lg-12">
                        									<div class="table-responsive">
                            									<table class="table table-hover">
                                                					<thead>
                                                						<tr>
                                                							<th>Output Label</th>
                                                							<th>File Name</th>
                                                							<th>File Type</th>
                                                						</tr>
                                                					</thead>
                                                					<tbody data-bind="foreach: ExpectedOutputs">
                        												<tr>
                        													<td>
                        														<span data-bind="text: OutputName"></span>
                        													</td>
                        													<td>
                        														<span data-bind="text: FileName"></span>
                        													</td>
                        													<td>
                        														<span data-bind="text: FileType"></span>
                        													</td>
                        												</tr>
                        											</tbody>
                                                				</table>
                                                			</div>
                                                		</div>
                    								</div>
                    								
                    								<hr/>
                    								
                    								<div class="col-lg-12">
                    								    <hr/>
                    									<h4>Default resources</h4>
                    									<hr/>
                    									<div class="col-lg-12">
                        									<!-- ko foreach: DefaultResources -->
                        									<div class="form-group">
                            									<label data-bind="text: Label"></label><br/>
                            									<span data-bind="text: Value"></span>
                            								</div>
                            								<!-- /ko -->
                            							</div>
                    								</div>
                								</div>   
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
						</div>  
				    </div>
				</div>
				
				<div id="tool-runner" style="display:none; overflow:hidden;" data-bind="with: $root.ToolVersion"> 
					<div class="row">
						<div class="col-md-12">
							<h2><i class="fa fa-wrench"></i> <span data-bind="text: Tool().ToolName"></span> (<span data-bind="text: ToolVersionNum"></span>)</h2>
							
						</div>
					</div>
					<!-- /. ROW  -->
						    
					<hr />
				
					<div class="col-lg-12" style="text-align:right;padding:10px;padding-top:0;">
						<a href="#" class="btn btn-warning" data-bind="click: $root.ShowToolList"><i class="fa fa-arrow-left"></i> Back</a>
					</div>
					<!-- /. ROW  -->
				
					<div class="col-lg-12">
						<div class="col-lg-3" style="padding:10px;padding-top:0;float:right;">
						    <label>Select version:</label>
							<select class="form-control" data-bind="value: $root.selected_version, options: Tool().ToolVersions,
						        optionsText: function(item) { return item.ToolVersionNum() }, 
						        optionsValue: function(item) { return item.ToolVersionNum() }">
						    </select>
						</div>
						<div class="col-lg-12" style="padding:10px;padding-top:0;">
						    <label>Tool Description:</label><br/>
							<span data-bind="text: ShortDescription">
						    </span>
    				        <hr>
						</div>
					</div>
					<!-- /. ROW  -->
                    <hr/>
                    
                    <form id="tool-form">
    					<div class="col-lg-12"> 
    					    <div class="col-lg-12" style="padding:10px;padding-top:0;">  
        					    <div class="form-group">
        						    <label>Job Name</label>
        						    <input class="form-control" data-bind="value: $root.tool_job_name"/>
        					    </div>
        					    <div class="form-group">
        						    <label>Job Description</label>
        						    <textarea class="form-control" data-bind="value: $root.tool_job_desc"></textarea>
    				    
    				                <hr>
        					    </div>
        					</div>
    				    </div>   
    				    
    					<div class="col-lg-12" data-bind="foreach: ToolParameters">
    					    <div class="col-lg-12" style="padding:10px;padding-top:0;">
    						    
    						    
    						    <div class="form-group" data-bind="if: InputBy() == 'user'">
    								<label>
    								    <span data-bind="text: ParameterName"></span>
    								</label>
    								<!-- ko if: OptionalInd -->
    								    <span style="font-size:8pt">(Optional)</span>
    								<!-- /ko -->
    								
    								<div data-bind="if: Type() == 1">
    									<div data-bind="if: Multiple() == false">												
    										<input class="form-control" data-bind="value: Value"/>
    									</div>
    									<div data-bind="if: Multiple() == true">
    										<table class="table table-responsive">
    											<tbody data-bind="foreach: value_items">
    												<tr>
    													<td>
    														<input class="form-control" data-bind="value: value"></input>
    													</td>
    													<td style="text-align:right;">
    														<a href="#" class="btn btn-danger btn-sm" data-bind="click: function() { $root.RemoveValue($parent, $data); }"><i class="fa fa-trash-o"></i></a>
    													</td>
    												</tr>
    											</tbody>
    											<tfoot>
    												<tr>
    													<td colspan='2' style="text-align:right">
    														<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddValue"><i class="fa fa-plus"></i></a>
    													</td>
    												</tr>
    											</tfoot>
    										</table>
    									</div>
    								</div>
    								<div data-bind="if: Type() == 2">
    									<div data-bind="if: Multiple() == false">												
    										<input class="form-control" type="number" data-bind="value: Value"></input>
    									</div>
    									<div data-bind="if: Multiple() == true">
    										<table class="table table-responsive">
    											<tbody data-bind="foreach: value_items">
    												<tr>
    													<td>
    														<input class="form-control" type="number" data-bind="value: value"></input>
    													</td>
    													<td style="text-align:right;">
    														<a href="#" class="btn btn-danger btn-sm" data-bind="click: function() { $root.RemoveValue($parent, $data); }"><i class="fa fa-trash-o"></i></a>
    													</td>
    												</tr>
    											</tbody>
    											<tfoot>
    												<tr>
    													<td colspan='2' style="text-align:right">
    														<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddValue"><i class="fa fa-plus"></i></a>
    													</td>
    												</tr>
    											</tfoot>
    										</table>
    									</div>
    								</div>
    								<div data-bind="if: Type() == 3">
    									<input type="checkbox" data-bind="checked: Value"></input>
    								</div>
    								<div data-bind="if: Type() == 4">
    									<select class="form-control" data-bind="options: ParameterOptions, optionsText: function(item) { return item.ParameterOptionText; }, 
    										optionsValue: function(item) { return item.ParameterOptionValue; }, value: Value, attr: { multiple: Multiple }, selectedOptions: selected_values"></select>
    								</div>
    								<div data-bind="if: Type() == 5">
    									<input class="form-control" type="file" data-bind="attr: { multiple: Multiple, id: 'param_' + ParameterID(), name: 'param_' + ParameterID() }"></input>
    								</div>
    								<div data-bind="if: Type() == 6" style="overflow:hidden;">
    									<div data-bind="if: Multiple() == true">
    										<select class="form-control" multiple data-bind="options: complex_objects, optionsText: function(item) { return item.Parameter().parameters()[0].Value(); }, selectedOptions: selected_parameters">
    										</select>
    										<div class='col-lg-12' style='text-align:right;'>
    											<a href="#" class="btn btn-danger btn-sm" data-bind="click: $root.DeleteComplexObject" style='margin-top:5px;'><i class="fa fa-trash-o"></i></a>
    											<a href="#" class="btn btn-warning btn-sm" data-bind="click: $root.EditComplexObject" style='margin-top:5px;'><i class="fa fa-edit"></i></a>
    											<a href="#" class="btn btn-success btn-sm" data-bind="click: $root.AddComplexObject" style='margin-top:5px;'><i class="fa fa-plus"></i></a>
    										</div>
    									</div>
    									<div data-bind="if: Multiple() == false">
    										<!-- ko template: { name: 'complex-object-input' } -->
    										<!-- /ko --> 
    									</div>
    								</div>										
    							</div>
    						</div>
    				    </div>
				    </form>
				    
				    <hr/>
				    
				    <div class="col-lg-12" style="text-align:right;padding-right:10px;padding-bottom:10px;">
						<div class="btn-group" style="margin-right:25px;">
							<a href="#" class="btn btn-success" data-bind="click: $root.RunTool"><i class="fa fa-play"></i> Run Job</a>
							<button data-toggle="dropdown" class="btn btn-success dropdown-toggle"><span class="caret"></span></button>
							<ul class="dropdown-menu" style="text-align:left;">
								<li><a href="#" data-bind="click: $root.ScheduleJob"><i class="fa fa-clock-o"></i> Schedule Job</a></li>
								<li><a href="#" data-bind="click: $root.SaveInputProfile"><i class="fa fa-save"></i> Save Input Profile</a></li>
							</ul>
						</div>
					</div>
				</div>
				
				<!-- CUSTOM JOB CONTAINER -->
				<div id="custom-job" style="display:none">	        
					<div class="row">
						<div class="col-md-12">						
							<h2>Custom Job</h2>						
						</div>
					</div>
					<!-- /. ROW  -->
						    
					<hr />
				
					<div class="row">
						<div class="col-lg-12" style="text-align:right;padding:10px;padding-top:0;">
							<a href="#" class="btn btn-warning" data-bind="click: $root.ShowToolList"><i class="fa fa-arrow-left"></i> Back</a>
						</div>
					</div>
				
					<div class="row">
						<div class="col-lg-12">
						    <h4>Job Details</h4>
						    <hr/>
						    <form id="custom-job">
    				            <div class="col-lg-12">
    								<div class="form-group">
    									<label>Job name:</label>
    									<input class="form-control" name="JobName" placeholder="Enter job name"/>
    								</div>
    								
    								<div class="form-group">
    									<label>Description:</label>
    									<textarea class="form-control" name="Description" placeholder="Enter a description"></textarea>
    								</div>
    							</div>
    							
    							<br/>
    							<h4>Settings</h4>
    							<hr/>
    							
    				            <div class="col-lg-12" data-bind="foreach: $root.DefaultResources">
    								<!-- ko if: ValueType() == 1 -->
                                    <div class="col-lg-6">
                                        <div class="form-group" style="padding:5px;">
                                            <label data-bind="text: Label"></label>
                                            <input type="text" class="form-control" data-bind="value: Value" />
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                    
                                    <!-- ko if: ValueType() == 2 -->
                                    <div class="col-lg-6">
                                        <div class="form-group" style="padding:5px;">
                                            <label data-bind="text: Label"></label>
                                            <input type="number" class="form-control" data-bind="value: Value" />
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                    
                                    <!-- ko if: ValueType() == 3 -->
                                    <div class="col-lg-6">
                                        <div class="form-group" style="padding:5px;">
                                            <input type="checkbox" data-bind="checked: Value" />
                                            <label data-bind="text: Label"></label>
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                    
                                    <!-- ko if: ValueType() == 4 -->
                                    <div class="col-lg-6">
                                        <div class="form-group" style="padding:5px;">
                                            <label data-bind="text: Label"></label>
                                            <input disabled class="form-control" data-bind="value: Value" />
                                        </div>
                                    </div>
                                    <!-- /ko -->
    							</div>
    							
    							<br/>	
    							<h4>Scripts</h4>
    							<hr/>
    							
    							<div class="col-lg-12">
    							    
    							    <div class="form-group col-lg-12">
        								<label>Enter your commands:</label>
        							    <textarea name="Commands" class="form-control ace"></textarea>
        							</div>
    							    
    							    <div class="form-group col-lg-12">
        								<label>Supporting scripts and/or files:</label>
        							    <input type="file" name="files" multiple class="form-control"/>
        							</div>
    							</div>
    							
    							
							</form>
						</div>
						
						<div class="col-lg-12" style="text-align:right;padding-right:10px;padding-bottom:10px;">
							<div class="btn-group" style="margin-right:25px;">
								<button class="btn btn-success" data-bind="click: $root.RunCustomJob"><i class="fa fa-play"></i> Run Job</button>
								<button data-toggle="dropdown" class="btn btn-success dropdown-toggle"><span class="caret"></span></button>
								<ul class="dropdown-menu" style="text-align:left;">
									<li><a href="#" data-bind="click: $root.ScheduleJob"><i class="fa fa-clock-o"></i> Schedule Job</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
				<!-- /. CUSTOM JOB CONTAINER -->
			</div>       
		</div>
		<!-- /. PAGE INNER  -->
	</div>
	<!-- /. PAGE WRAPPER  -->
{% endblock %}

{% block scripts %}	
	<!-- SCRIPTS -AT THE BOTTOM TO REDUCE THE LOAD TIME-->
	<!-- JQUERY SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/jquery-1.10.2.js"></script>
	<script src="{{ STATIC_URL }}lib/jquery-migrate.min.js"></script>
	<script src="{{ STATIC_URL }}lib/jquery-ui-1.11.2.jms/jquery-ui.js"></script>
	<!-- BOOTSTRAP SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/bootstrap/binary/js/bootstrap.min.js"></script>
	<!-- METISMENU SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/bootstrap/binary/js/jquery.metisMenu.js"></script>
	<!-- ACE EDITOR -->
	<script src="{{ STATIC_URL }}lib/ace-editor/ace.js"></script>
    <script src="{{ STATIC_URL }}lib/ace-editor/ext-modelist.js"></script>
    <script src="{{ STATIC_URL }}lib/ace-editor/ext-language_tools.js"></script>
	<!-- KNOCKOUT SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/knockout-3.0.0.js"></script>
	<!-- SAMMY SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/sammy.js"></script>
	<!-- CUSTOM SCRIPTS -->
	<script src="{{ STATIC_URL }}lib/custom/JMS/custom.js"></script>
	<script src="{{ STATIC_URL }}lib/custom/question.js"></script>
	<script src="{{ STATIC_URL }}lib/custom/JMS/tool.js"></script>
{% endblock %}
